/*
 * Copyright 2019 NXP
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License
 * as published by the Free Software Foundation; either version 2
 * of the License, or (at your option) any later version.
 */

/dts-v1/;

#include "imx6ull.dtsi"
#include "imx6ull-100ask-emmc.dtsi"

/ {
	model = "Freescale i.MX6 ULL 100ASK EMMC Board";
	compatible = "fsl,imx6ull-100ask-emmc", "fsl,imx6ull";
};

&gpmi{
	status = "disabled";
};

&cpu0 {
	arm-supply = <&reg_arm>;
	soc-supply = <&reg_soc>;
};

&clks {
	assigned-clocks = <&clks IMX6UL_CLK_PLL4_AUDIO_DIV>;
	assigned-clock-rates = <786432000>;
};

&fec1 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_enet1>;
	phy-mode = "rmii";
	phy-handle = <&ethphy0>;
	phy-reset-gpios = <&gpio5 9 GPIO_ACTIVE_LOW>;
	phy-reset-duration = <26>;
	status = "okay";
};

&fec2 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_enet2>;
	phy-mode = "rmii";
	phy-handle = <&ethphy1>;
	phy-reset-gpios = <&gpio5 6 GPIO_ACTIVE_LOW>;
	phy-reset-duration = <26>;
	status = "okay";

	mdio {
		#address-cells = <1>;
		#size-cells = <0>;

		ethphy0: ethernet-phy@0 {
			compatible = "ethernet-phy-ieee802.3-c22";
			smsc,disable-energy-detect;
			reg = <0>;
		};

		ethphy1: ethernet-phy@1 {
			compatible = "ethernet-phy-ieee802.3-c22";
			smsc,disable-energy-detect;
			reg = <1>;
		};
	};
};

&can1 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_flexcan1>;
	xceiver-supply = <&reg_can_3v3>;
	status = "okay";
};

&gpc {
	fsl,cpu_pupscr_sw2iso = <0x1>;
	fsl,cpu_pupscr_sw = <0x0>;
	fsl,cpu_pdnscr_iso2sw = <0x1>;
	fsl,cpu_pdnscr_iso = <0x1>;
	fsl,ldo-bypass = <0>; /* DCDC, ldo-enable */
};

&i2c1 {
	clock-frequency = <100000>;
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_i2c1>;
	status = "okay";
};

&i2c2 {
	clock_frequency = <100000>;
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_i2c2>;
	status = "okay";

	codec: wm8960@1a {
		compatible = "wlf,wm8960";
		reg = <0x1a>;
		clocks = <&clks IMX6UL_CLK_SAI2>;
		clock-names = "mclk";
		wlf,shared-lrclk;
	};

	sii902x: sii902x@39 {
		compatible = "SiI,sii902x";
		pinctrl-names = "default";
		reset-names="sii902x";
		pinctrl-0 = <&pinctrl_sii902x>;
		resets = <&sii902x_reset>;
		interrupt-parent = <&gpio1>;
		interrupts = <18 IRQ_TYPE_EDGE_FALLING>;
		mode_str ="1280x720M@60";
		bits-per-pixel = <16>;
		reg = <0x39>;
		status = "okay";
	};

	gt9xx@5d {
		compatible = "goodix,gt9xx";
		reg = <0x5d>;
		status = "okay";
		interrupt-parent = <&gpio1>;
		interrupts = <5 IRQ_TYPE_EDGE_FALLING>;
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_tsc_reset &pinctrl_touchscreen_int>;
		reset-gpios = <&gpio5 2 GPIO_ACTIVE_LOW>;
		irq-gpios = <&gpio1 5 IRQ_TYPE_EDGE_FALLING>;
		irq-flags = <2>;                /*1:rising 2: falling*/

		touchscreen-max-id = <5>;
		touchscreen-size-x = <800>;
		touchscreen-size-y = <480>;
		touchscreen-max-w = <1024>;
		touchscreen-max-p = <1024>;

		goodix,type-a-report = <0>;
		goodix,driver-send-cfg = <0>;
		goodix,create-wr-node = <1>;
		goodix,wakeup-with-reset = <0>;
		goodix,resume-in-workqueue = <0>;
		goodix,int-sync = <0>;
		goodix,swap-x2y = <0>;
		goodix,esd-protect = <0>;
		goodix,pen-suppress-finger = <0>;
		goodix,auto-update = <0>;
		goodix,auto-update-cfg = <0>;
		goodix,power-off-sleep = <0>;

		/*7*/
		goodix,cfg-group0 = [
			6b 00 04 58 02 05 0d 00 01 0f
			28 0f 50 32 03 05 00 00 00 00
			00 00 00 00 00 00 00 8a 2a 0c
			45 47 0c 08 00 00 00 40 03 2c
			00 01 00 00 00 03 64 32 00 00
			00 28 64 94 d5 02 07 00 00 04
			95 2c 00 8b 34 00 82 3f 00 7d
			4c 00 7a 5b 00 7a 00 00 00 00
			00 00 00 00 00 00 00 00 00 00
			00 00 00 00 00 00 00 00 00 00
			00 00 00 00 00 00 00 00 00 00
			00 00 18 16 14 12 10 0e 0c 0a
			08 06 04 02 ff ff 00 00 00 00
			00 00 00 00 00 00 00 00 00 00
			00 00 16 18 1c 1d 1e 1f 20 21
			22 24 13 12 10 0f 0a 08 06 04
			02 00 ff ff ff ff ff ff 00 00
			00 00 00 00 00 00 00 00 00 00
			00 00 00 00 79 01
		];

		/*4.3*/
		goodix,cfg-group1 = [
			97 E0 01 10 01 05 0D 00 01 00
			00 05 5A 46 53 11 00 00 11 11
			14 14 14 22 0A 04 00 00 00 00
			00 00 53 00 14 00 00 84 00 00
			3C 00 00 64 1E 28 87 27 08 32
			34 05 0D 20 33 60 11 02 24 00
			00 64 80 80 14 02 00 00 54 89
			68 85 6D 82 72 80 76 7D 7B 7B
			00 00 00 00 00 00 00 F0 50 3C
			FF FF 07 00 00 00 02 14 14 03
			04 00 21 64 0A 00 00 00 00 00
			00 00 00 00 00 00 00 00 00 00
			00 00 00 00 00 00 00 00 00 00
			32 20 50 3C 3C 00 00 00 00 00
			0D 06 0C 05 0B 04 0A 03 FF FF
			FF FF FF FF 00 01 02 03 04 05
			06 07 08 09 0A 0B 0C 0D FF FF
			FF FF FF FF FF FF FF FF FF FF
			00 00 00 00 00 00 00 00 00 00
			00 00 00 00 3C 00 05 1E 00 02
			2A 1E 19 14 02 00 03 0A 05 00
			00 00 00 00 00 00 01 FF FF 86
			22 03 00 00 33 00 0F 00 00 00
			50 3C 50 00 00 00 00 2A 01
		];

		/*5*/
		goodix,cfg-group2 = [
			00 20 03 E0 01 05 3C 00 01 08
			28 0C 50 32 03 05 00 00 00 00
			00 00 00 17 19 1E 14 8B 2B 0D
			33 35 0C 08 00 00 00 9A 03 11
			00 01 00 00 00 00 00 32 00 00
			00 20 58 94 C5 02 00 00 00 04
			B0 23 00 93 2B 00 7B 35 00 69
			41 00 5B 4F 00 5B 00 00 00 00
			00 00 00 00 00 00 00 00 00 00
			00 00 00 00 00 00 00 00 00 00
			00 00 00 00 00 00 00 00 00 00
			00 00 02 04 06 08 0A 0C 0E 10
			12 14 16 18 1A FF 00 00 00 00
			00 00 00 00 00 00 00 00 00 00
			00 00 00 02 04 06 08 0A 0C 0F
			10 12 13 16 18 1C 1D 1E 1F 20
			21 22 24 26 FF FF FF FF 00 00
			00 FF FF FF FF FF FF FF FF FF
			FF FF FF FF 48 01
		];
	};
};

&lcdif {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_lcdif_dat
				&pinctrl_lcdif_ctrl
				&pinctrl_lcdif_reset>;
	display = <&display0>;
	status = "okay";
	reset-gpios = <&gpio3 4 GPIO_ACTIVE_LOW>; /* 100ask */

	display0: display@0 {
		bits-per-pixel = <24>;
		bus-width = <24>;

		display-timings {
			ative-mode = <&timing0>;

			timing0: timing0_1024x768 {
				clock-frequency = <50000000>;
				hactive = <1024>;
				vactive = <600>;
				hfront-porch = <160>;
				hback-porch = <140>;
				hsync-len = <20>;
				vback-porch = <20>;
				vfront-porch = <12>;
				vsync-len = <3>;

				hsync-active = <0>;
				vsync-active = <0>;
				de-active = <1>;
				pixelclk-active = <0>;
			};
		};
	};
};

&pwm1 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_pwm1>;
	status = "okay";
};

&pxp {
	status = "okay";
};

&ecspi3 { 
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_ecspi3>;
	cs-gpios = <&gpio1 20 GPIO_ACTIVE_LOW>;
	status = "okay";

	spidev: icm20608@0{
		compatible = "invensense,icm20608";
		interrupt-parent = <&gpio1>;
		interrupts = <1 1>;
		spi-max-frequency = <8000000>;
		reg = <0>;
	};
};

&sai2 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_sai2>;

	assigned-clocks = <&clks IMX6UL_CLK_SAI2_SEL>,
					<&clks IMX6UL_CLK_SAI2>;
	assigned-clock-parents = <&clks IMX6UL_CLK_PLL4_AUDIO_DIV>;
	assigned-clock-rates = <0>, <12288000>;

	status = "okay";
};

&tsc {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_tsc>;
	xnur-gpio = <&gpio1 3 GPIO_ACTIVE_LOW>;
	measure-delay-time = <0xfffff>;
	pre-charge-time = <0xffff>;
	status = "okay";
};

&uart1 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_uart1>;
	status = "okay";
};

&uart3 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_uart3
				&pinctrl_485_ctl>;
	rs485-rts-active-high;
	rs485-rx-during-tx;
	rs485-rts-delay = <100 100>;
	linux,rs485-enabled-at-boot-time;
	status = "okay";
};
 
&uart6 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_uart6>;
	status = "okay";
};

&usbotg1 {
	dr_mode = "otg";
	srp-disable;
	hnp-disable;
	adp-disable;
	status = "okay";
};

&usbotg2 {
	dr_mode = "host";
	disable-over-current;
	status = "okay";
};

&usbphy1 {
	tx-d-cal = <0x5>;
};

&usbphy2 {
	tx-d-cal = <0x5>;
};

&usdhc1 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_usdhc1>;
	cd-gpios = <&gpio1 19 GPIO_ACTIVE_LOW>;
	keep-power-in-suspend;
	enable-sdio-wakeup;
	bus-width = <4>;
	status = "okay";
};

&usdhc2 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_usdhc2_8bit>;
	bus-width = <8>;
	non-removable;
	status = "okay";
};

&wdog1 {
	status = "okay";
};

&adc1 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_adc1>;
	num-channels = <5>;
	vref-supply = <&reg_can_3v3>;
	status = "okay";
};

&ecspi1 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_ecspi1>;

	fsl,spi-num-chipselects = <2>;
	cs-gpios = <&gpio4 26 GPIO_ACTIVE_LOW>, <&gpio4 24 GPIO_ACTIVE_LOW>;
	status = "okay";
};

/delete-node/ &sim2;
